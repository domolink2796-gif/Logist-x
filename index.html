<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>LOGIST_X | Elite Pro</title>
    
    <link rel="manifest" href="app/manifest.json">
    <meta name="theme-color" content="#010409">
    <link rel="apple-touch-icon" href="app/icon-1024.png">
    
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-[#010409] text-white flex items-center justify-center min-h-screen text-center p-6">
    <div class="max-w-md">
        <h1 class="text-6xl font-black mb-4 italic text-amber-500">LOGIST_X</h1>
        <p class="text-xl opacity-40 mb-10 italic">Умная система управления персоналом</p>
        
        <button id="installBtn" onclick="window.location.href='app/index.html'" class="w-full bg-amber-500 text-black font-black px-8 py-6 rounded-3xl text-xl uppercase shadow-2xl transition-all active:scale-95">
            СТАРТ ТЕРМИНАЛА
        </button>
        
        <p class="mt-8 text-[10px] opacity-20 uppercase tracking-[5px]">Elite Pro Robot Edition</p>
    </div>

    <script type="text/javascript">
       (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};m[i].l=1*new Date();for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})(window, document,'script','https://mc.yandex.ru/metrika/tag.js?id=106053460', 'ym');ym(106053460, 'init', {ssr:true, webvisor:true, clickmap:true, ecommerce:"dataLayer", accurateTrackBounce:true, trackLinks:true});
    </script>

    <script>
        // ЛОГИКА УСТАНОВКИ
        let deferredPrompt;
        const btn = document.getElementById('installBtn');

        // Слушаем, когда браузер поймет, что можно установить приложение
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            // Меняем текст кнопки, когда установка готова
            btn.innerText = "УСТАНОВИТЬ ПРИЛОЖЕНИЕ";
            btn.style.boxShadow = "0 0 30px rgba(245, 158, 11, 0.4)";
        });

        btn.addEventListener('click', async (e) => {
            if (deferredPrompt) {
                // Если установка доступна - запускаем её
                e.preventDefault();
                deferredPrompt.prompt();
                const { outcome } = await deferredPrompt.userChoice;
                if (outcome === 'accepted') {
                    deferredPrompt = null;
                    btn.innerText = "СТАРТ ТЕРМИНАЛА";
                }
            }
        });

        // Регистрация двигателя (sw.js)
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('app/sw.js', { scope: '/' });
            });
        }
    </script>
</body>
</html>
