<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    
    <meta name="yandex-verification" content="888cbf1c9d567f69" />

    <script type="text/javascript" >
       (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
       m[i].l=1*new Date();
       for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
       k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
       (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

       ym(106053460, "init", {
            clickmap:true,
            trackLinks:true,
            accurateTrackBounce:true,
            webvisor:true
       });
    </script>
    <title>LOGIST_X | Контроль персонала и Аналитика MERCH_X</title>
    <meta name="description" content="LOGIST_X — ERP-система контроля полевого персонала. Автоматические отчеты и аналитика ритейла.">
    <meta name="keywords" content="контроль монтажников, фотоотчет расклейка, программа для мерчандайзеров, контроль полевого персонала, автоматизация фотоотчетов, GPS контроль сотрудников, отчеты в google таблицы">
    
    <link rel="manifest" href="app/manifest.json">
    <meta name="theme-color" content="#010409">
    <link rel="apple-touch-icon" href="app/icon-1024.png">

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    
    <script type="application/ld+json">
    {
      "@context": "https://schema.org/",
      "@type": "SoftwareApplication",
      "name": "LOGIST_X",
      "operatingSystem": "Android, iOS, Windows",
      "applicationCategory": "BusinessApplication",
      "offers": {
        "@type": "Offer",
        "price": "1500.00",
        "priceCurrency": "RUB"
      }
    }
    </script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap');
        :root { --accent: #f59e0b; --bg: #010409; --card: rgba(13, 17, 23, 0.7); }
        body { background-color: var(--bg); color: #e6edf3; font-family: 'Inter', sans-serif; overflow-x: hidden; -webkit-font-smoothing: antialiased; }
        @keyframes pulse-gold { 0% { box-shadow: 0 0 0 0 rgba(245, 158, 11, 0.7); transform: scale(1); } 70% { box-shadow: 0 0 0 20px rgba(245, 158, 11, 0); transform: scale(1.03); } 100% { box-shadow: 0 0 0 0 rgba(245, 158, 11, 0); transform: scale(1); } }
        .btn-install-gold { background: linear-gradient(135deg, #f59e0b 0%, #b45309 100%); color: #000 !important; font-weight: 900; text-transform: uppercase; letter-spacing: 1px; animation: pulse-gold 2s infinite; transition: all 0.3s ease; display: inline-flex; align-items: center; justify-content: center; border-radius: 1.5rem; }
        .btn-bot-outline { border: 2px solid var(--accent); color: var(--accent) !important; font-weight: 900; text-transform: uppercase; letter-spacing: 1px; transition: all 0.3s ease; display: inline-flex; align-items: center; justify-content: center; border-radius: 1.5rem; background: rgba(245, 158, 11, 0.05); }
        .btn-bot-outline:hover { background: var(--accent); color: #000 !important; }
        .price-card { background: var(--card); backdrop-filter: blur(20px); border: 1px solid rgba(255, 255, 255, 0.05); border-radius: 2.5rem; padding: 2.5rem 1.5rem; transition: 0.4s ease; display: flex; flex-direction: column; justify-content: space-between; }
        .folder-node { border-left: 2px solid rgba(245, 158, 11, 0.2); margin-left: 1rem; padding-left: 1.5rem; position: relative; margin-bottom: 0.75rem; }
        .folder-node::before { content: ''; position: absolute; left: 0; top: 0.75rem; width: 1rem; border-top: 2px solid rgba(245, 158, 11, 0.2); }
        .dot-matrix { background-image: radial-gradient(rgba(245, 158, 11, 0.1) 1px, transparent 1px); background-size: 30px 30px; }
        .benefit-card { background: rgba(255,255,255,0.02); border: 1px solid rgba(255,255,255,0.05); border-radius: 2rem; padding: 2rem; transition: 0.3s; height: 100%; display: flex; flex-direction: column; }
        .benefit-card:hover { border-color: var(--accent); background: rgba(245, 158, 11, 0.05); }
        .modal { display: none; position: fixed; z-index: 2000; left: 0; top: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); backdrop-filter: blur(10px); overflow-y: auto; }
        .modal-content { background: #0d1117; margin: 5% auto; padding: 40px; border: 1px solid #30363d; width: 95%; max-width: 600px; border-radius: 24px; color: #8b949e; font-size: 14px; line-height: 1.6; position: relative; }
        .modal-header { color: #f59e0b; font-weight: 900; font-size: 24px; margin-bottom: 20px; text-transform: uppercase; }
        .close-modal { color: #fff; float: right; font-size: 28px; cursor: pointer; }
        .login-input { width: 100%; background: #010409; border: 1px solid #30363d; padding: 15px; border-radius: 12px; color: #fff; font-size: 18px; font-weight: 700; text-align: center; margin-bottom: 15px; letter-spacing: 2px; }
        .login-input:focus { border-color: var(--accent); outline: none; }
        #cabinetFrame { width: 100%; height: 80vh; border: none; border-radius: 12px; }
        .tab-btn { font-weight: 900; text-transform: uppercase; font-size: 12px; letter-spacing: 2px; padding-bottom: 8px; border-bottom: 2px solid transparent; opacity: 0.4; transition: 0.3s; }
        .tab-btn.active { opacity: 1; color: var(--accent); border-bottom-color: var(--accent); }
    </style>
</head>
<body class="dot-matrix">
    <noscript><div><img src="https://mc.yandex.ru/watch/106053460" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
    <nav class="fixed top-0 w-full z-[1000] bg-black/80 backdrop-blur-xl border-b border-white/5 px-6 py-4">
        <div class="max-w-7xl mx-auto flex justify-between items-center">
            <div class="flex items-center gap-2">
                <div class="bg-amber-500 p-1.5 rounded-xl"><i data-lucide="shield-check" class="text-black" size="20"></i></div>
                <span class="text-2xl font-black italic tracking-tighter uppercase text-white">LOGIST<span class="text-amber-500">_X</span></span>
            </div>
            <div class="flex gap-2">
                <button onclick="openModal('modalCabinet')" class="btn-bot-outline px-4 py-2 text-[9px]">Личный Кабинет</button>
                <button onclick="handleInstallClick()" class="btn-install-gold px-5 py-2.5 text-[9px] hidden xs:flex">Установить App</button>
            </div>
        </div>
    </nav>

    <header class="relative pt-48 pb-24 text-center px-4">
        <div class="max-w-5xl mx-auto">
            <h1 class="text-5xl md:text-8xl font-black mb-10 uppercase tracking-tighter animate__animated animate__fadeInUp">
                КОНТРОЛЬ <br><span class="text-amber-500 italic underline decoration-amber-500/20 text-4xl md:text-7xl">БЕЗ ОБМАНА</span>
            </h1>
            <p class="text-lg md:text-2xl opacity-40 mb-14 max-w-2xl mx-auto leading-relaxed animate__animated animate__fadeInUp italic text-white">
                Выберите инструмент для начала работы в системе:
            </p>
            <div class="flex flex-col lg:flex-row gap-4 justify-center items-stretch">
                <button onclick="handleInstallClick()" class="btn-install-gold px-8 py-6 text-sm gap-3 shadow-2xl flex-1">
                   <i data-lucide="download-cloud" size="22"></i> УСТАНОВИТЬ LOGIST_X
                </button>
                <button onclick="window.location.href='merch-info.html'" class="btn-bot-outline px-8 py-6 text-sm gap-3 flex-1 border-amber-500/50">
                   <i data-lucide="bar-chart-3" size="22"></i> АНАЛИТИКА MERCH_X
                </button>
                <button onclick="goToBot()" class="btn-bot-outline px-8 py-6 text-sm gap-3 flex-1">
                   <i data-lucide="message-circle" size="22"></i> НАЧАТЬ В TELEGRAM
                </button>
            </div>
        </div>
    </header>

    <section class="py-24 px-6 border-t border-white/5">
        <div class="max-w-7xl mx-auto text-center">
            <h2 class="text-3xl md:text-6xl font-black mb-16 italic uppercase text-white text-center">Наши <span class="text-amber-500">Технологии</span></h2>
            <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6 text-left text-white">
                <div class="benefit-card text-center sm:text-left">
                    <div class="text-amber-500 mb-6 mx-auto sm:mx-0"><i data-lucide="layout-grid" size="40"></i></div>
                    <h3 class="text-xl font-black mb-4 uppercase italic">Авто-Иерархия</h3>
                    <p class="opacity-40 text-xs leading-relaxed italic">Автоматическое создание папок: <strong>Монтажник → Объект → Дата.</strong></p>
                </div>
                <div class="benefit-card text-center sm:text-left">
                    <div class="text-amber-500 mb-6 mx-auto sm:mx-0"><i data-lucide="table-2" size="40"></i></div>
                    <h3 class="text-xl font-black mb-4 uppercase italic">Листы Google</h3>
                    <p class="opacity-40 text-xs leading-relaxed italic">Персональные вкладки для каждого сотрудника с итоговыми суммами.</p>
                </div>
                <div class="benefit-card text-center sm:text-left">
                    <div class="text-amber-500 mb-6 mx-auto sm:mx-0"><i data-lucide="map-pin" size="40"></i></div>
                    <h3 class="text-xl font-black mb-4 uppercase italic">GPS-Контроль</h3>
                    <p class="opacity-40 text-xs leading-relaxed italic">Фотофиксация с защитой от подмены координат и времени.</p>
                </div>
                <a href="merch-info.html" class="benefit-card border-amber-500/30 bg-amber-500/5 group cursor-pointer text-center sm:text-left">
                    <div class="text-amber-500 mb-6 mx-auto sm:mx-0 animate-pulse"><i data-lucide="bar-chart-3" size="40"></i></div>
                    <h3 class="text-xl font-black mb-4 uppercase italic group-hover:text-amber-500 transition-colors">Система MERCH_X</h3>
                    <p class="opacity-60 text-xs leading-relaxed mb-6 italic text-amber-500/80">Аналитика полок, остатки товара и расчет доли фейсинга.</p>
                    <div class="mt-auto text-amber-500 text-[10px] font-black uppercase tracking-widest flex items-center justify-center sm:justify-start gap-2">ПОДРОБНЕЕ <i data-lucide="arrow-right" size="14"></i></div>
                </a>
            </div>
        </div>
    </section>

    <section class="py-24 px-6 border-t border-white/5 bg-black/40">
        <div class="max-w-6xl mx-auto grid lg:grid-cols-2 gap-20 items-center">
            <div class="bg-[#05070a] p-8 md:p-12 rounded-[3rem] border border-white/5 shadow-2xl">
                <div class="text-amber-500/40 mb-10 font-black text-xs tracking-[8px] uppercase border-b border-white/5 pb-6 text-white">ERP_Drive_Structure</div>
                <div class="folder-node">
                    <div class="flex items-center gap-3 text-blue-400 font-black uppercase tracking-widest text-sm"><i data-lucide="user" size="18"></i> Костик_Монтажник</div>
                    <div class="folder-node">
                        <div class="flex items-center gap-3 text-green-500 font-black uppercase tracking-widest text-sm"><i data-lucide="building" size="18"></i> Магнит_Объект</div>
                        <div class="folder-node italic text-amber-500/60 text-sm"><div class="flex items-center gap-3"><i data-lucide="file-image" size="16"></i> <span>Монтаж_Завершен.jpg</span></div></div>
                    </div>
                </div>
            </div>
            <div class="text-center lg:text-left text-white">
                <h2 class="text-4xl md:text-7xl font-black mb-8 italic uppercase text-amber-500 leading-none">УМНЫЙ АРХИВ</h2>
                <p class="opacity-40 text-xl italic leading-relaxed">Система сама распределяет фото по адресам. Вы получаете чистую аналитику без ручного труда.</p>
            </div>
        </div>
    </section>

    <section class="py-24 px-6 border-t border-white/5">
        <div class="max-w-6xl mx-auto">
            <h2 class="text-3xl md:text-6xl font-black italic uppercase text-white mb-16 text-center">Наш <span class="text-amber-500">Блог</span></h2>
            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8 text-white">
                <a href="blog-1.html" class="benefit-card flex flex-col justify-between group cursor-pointer">
                    <div><div class="text-amber-500/40 mb-6 font-black text-[10px] tracking-[4px] uppercase italic text-center">МЕТОДОЛОГИЯ</div>
                    <h3 class="text-xl font-black mb-4 uppercase group-hover:text-amber-500 italic">Исключаем обман</h3>
                    <p class="opacity-40 text-xs leading-relaxed mb-8 italic">Разбираем методы GPS-контроля для полной прозрачности работы полевого персонала...</p></div>
                    <div class="text-amber-500 text-[10px] font-black uppercase tracking-widest flex items-center gap-2">Читать <i data-lucide="arrow-right" size="14"></i></div>
                </a>
                <a href="blog-2.html" class="benefit-card flex flex-col justify-between group cursor-pointer">
                    <div><div class="text-amber-500/40 mb-6 font-black text-[10px] tracking-[4px] uppercase italic text-center">МЕНЕДЖМЕНТ</div>
                    <h3 class="text-xl font-black mb-4 uppercase group-hover:text-amber-500 italic">Порядок в сетях</h3>
                    <p class="opacity-40 text-xs leading-relaxed mb-8 italic">Как организовать контроль на десятках точек одновременно...</p></div>
                    <div class="text-amber-500 text-[10px] font-black uppercase tracking-widest flex items-center gap-2">Читать <i data-lucide="arrow-right" size="14"></i></div>
                </a>
                <a href="blog-3.html" class="benefit-card flex flex-col justify-between group cursor-pointer">
                    <div><div class="text-amber-500/40 mb-6 font-black text-[10px] tracking-[4px] uppercase italic text-center">ОБНОВЛЕНИЯ</div>
                    <h3 class="text-xl font-black mb-4 uppercase group-hover:text-amber-500 italic">Функции 2026</h3>
                    <p class="opacity-40 text-xs leading-relaxed mb-8 italic">Анонсируем Telegram-панель управления и новые автоматические отчеты...</p></div>
                    <div class="text-amber-500 text-[10px] font-black uppercase tracking-widest flex items-center gap-2">Читать <i data-lucide="arrow-right" size="14"></i></div>
                </a>
            </div>
        </div>
    </section>

    <section id="pricing" class="py-32 px-6 border-t border-white/5">
        <div class="max-w-3xl mx-auto">
            <div class="price-card border-amber-500/40 bg-amber-500/5 text-center">
                <h3 class="text-xs font-black uppercase tracking-[6px] mb-10 opacity-60 text-amber-500">Единый тариф</h3>
                <div class="text-7xl md:text-8xl font-black mb-4 italic text-amber-500">1 500 <span class="text-2xl not-italic opacity-40 text-white">₽</span></div>
                <p class="opacity-60 text-white font-bold text-sm uppercase tracking-widest mb-10">В месяц за сотрудника</p>
                <button onclick="goToBot()" class="btn-install-gold w-full py-7 text-sm tracking-widest uppercase italic text-black">Запустить через BOT</button>
            </div>
        </div>
    </section>

    <section class="py-10 px-6 opacity-10 text-[10px] text-center max-w-4xl mx-auto text-white">
        <p>Автоматизация контроля монтажников, расклейщиков объявлений и мерчандайзеров. Приложение LOGIST_X позволяет организовать сбор фотоотчетов с GPS-подтверждением прямо в Google Таблицы. Идеально для рекламных агентств, клининга и логистики. Забудьте про отчеты в WhatsApp — используйте профессиональный софт.</p>
    </section>

    <footer class="py-24 text-center border-t border-white/5 bg-[#05070a]">
        <p class="text-[10px] font-black uppercase tracking-[15px] opacity-40 text-white">LOGIST_X & MERCH_X 2026</p>
        
        <div class="mt-8 text-[11px] text-amber-500/80 space-y-2 uppercase tracking-widest italic">
            <p>Никитин Евгений Анатольевич | ИНН: 575405332940</p>
            <p>Статус: Самозанятый (Налог на профессиональный доход)</p>
            <p>Email: evgeny_orel@mail.ru | Тел: +7 995 447-01-30</p>
        </div>

        <div class="mt-8 flex justify-center gap-6 opacity-30 grayscale contrast-125">
            <img src="https://upload.wikimedia.org/wikipedia/commons/5/5e/Visa_Inc._logo.svg" width="40" alt="Visa">
            <img src="https://upload.wikimedia.org/wikipedia/commons/2/2a/Mastercard-logo.svg" width="30" alt="Mastercard">
            <img src="https://upload.wikimedia.org/wikipedia/commons/b/b9/Mir-logo.svg" width="50" alt="Мир">
        </div>

        <div class="mt-8 flex flex-wrap justify-center gap-6 text-[10px] uppercase font-bold text-white/40">
            <a href="https://t.me/gena_krokodi" target="_blank" class="text-amber-500 border border-amber-500/30 px-4 py-2 rounded-full hover:bg-amber-500 hover:text-black transition-all flex items-center gap-2"><i data-lucide="send" size="12"></i> СВЯЗАТЬСЯ С НАМИ</a>
            <a href="/privacy-policy" onclick="event.preventDefault(); openModal('modalPrivacy')" class="hover:text-amber-500 self-center">Политика конфиденциальности</a>
            <a href="/public-offer" onclick="event.preventDefault(); openModal('modalTerms')" class="hover:text-amber-500 self-center">Публичная оферта</a>
        </div>
    </footer>

    <div id="modalCabinet" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal('modalCabinet')">&times;</span>
            
            <div id="auth-ui">
                <div class="flex gap-6 mb-8 border-b border-white/10">
                    <button onclick="switchTab('login')" id="btn-tab-login" class="tab-btn active">Вход по ключу</button>
                    <button onclick="switchTab('buy')" id="btn-tab-buy" class="tab-btn">Купить лицензию</button>
                </div>

                <div id="login-section">
                    <div class="modal-header">Вход в кабинет</div>
                    <p class="mb-6">Введите 8-значный ключ вашего объекта:</p>
                    <input type="text" id="userKey" class="login-input" placeholder="XXXX-XXXX" maxlength="9">
                    <button onclick="loginToCabinet()" class="btn-install-gold w-full py-4 text-sm tracking-widest uppercase italic text-black">ОТКРЫТЬ ДАННЫЕ</button>
                </div>

                <div id="buy-section" style="display: none;">
                    <div class="modal-header">Новая лицензия</div>
                    <div class="space-y-4">
                        <div>
                            <label class="text-[9px] uppercase font-bold opacity-40 ml-2">Название объекта</label>
                            <input type="text" id="buyName" class="login-input !text-left !text-sm !mb-0" placeholder="Например: Склад-1">
                        </div>
                        
                        <div class="grid grid-cols-2 gap-2">
                            <div>
                                <label class="text-[9px] uppercase font-bold opacity-40 ml-2">Сотрудников</label>
                                <input type="number" id="buyLimit" class="login-input !text-left !text-sm !mb-0" value="5" min="1" oninput="calculatePrice()">
                            </div>
                            <div>
                                <label class="text-[9px] uppercase font-bold opacity-40 ml-2">Период</label>
                                <select id="buyMonths" class="login-input !text-left !text-sm !mb-0 !bg-black" onchange="calculatePrice()">
                                    <option value="30">1 месяц</option>
                                    <option value="90">3 месяца (-10%)</option>
                                    <option value="180">6 месяцев (-15%)</option>
                                    <option value="365">1 год (ВЫГОДНО)</option>
                                </select>
                            </div>
                        </div>

                        <div>
                            <label class="text-[9px] uppercase font-bold opacity-40 ml-2">Тип проекта</label>
                            <select id="buyType" class="login-input !text-left !text-sm !mb-0 !bg-black" onchange="calculatePrice()">
                                <option value="logist">LOGIST_X (Расклейка / Монтаж)</option>
                                <option value="merch">MERCH_X (Мерчандайзинг / Аналитика)</option>
                            </select>
                        </div>

                        <div class="bg-white/5 p-4 rounded-xl border border-white/10 text-center">
                            <div class="text-[10px] uppercase opacity-50 mb-1">Итого к оплате:</div>
                            <div id="totalPriceDisplay" class="text-2xl font-black text-amber-500">7 500 ₽</div>
                        </div>
                        
                        <button onclick="buyLicenseOnSite()" class="btn-install-gold w-full py-4 text-sm tracking-widest uppercase italic text-black">ОПЛАТИТЬ ДОСТУП</button>
                    </div>
                </div>
            </div>

            <div id="iframe-section" style="display: none;">
                <div class="modal-header" id="cabinetTitle">Ваш Кабинет</div>
                <iframe id="cabinetFrame" src=""></iframe>
                <button onclick="location.reload()" class="mt-4 text-[10px] uppercase opacity-50 hover:opacity-100">← Выйти из кабинета</button>
            </div>
        </div>
    </div>

    <div id="modalPrivacy" class="modal"><div class="modal-content"><span class="close-modal" onclick="closeModal('modalPrivacy')">&times;</span><div class="modal-header">Политика конфиденциальности</div><p>Настоящая политика действует в отношении всей информации, которую сервис LOGIST_X может получить о пользователе Никитине Евгении Анатольевиче (самозанятый)...</p></div></div>
    <div id="modalTerms" class="modal"><div class="modal-content"><span class="close-modal" onclick="closeModal('modalTerms')">&times;</span><div class="modal-header">Публичная оферта</div><p>Сервис LOGIST_X (Никитин Е.А., самозанятый) предоставляет доступ к ПО на условиях подписки от 1500 руб/мес за одного пользователя. Оплата производится через сервис Робокасса...</p></div></div>

    <script>
        lucide.createIcons();
        const BOT_URL = 'https://t.me/LogistX_Robot_Bot';
        const SERVER_URL = 'https://logist-x-server-production.up.railway.app';
        let deferredPrompt;
        
        function speak(text) {
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = 'ru-RU';
            utterance.rate = 1.0;
            window.speechSynthesis.speak(utterance);
        }

        window.addEventListener('beforeinstallprompt', (e) => { e.preventDefault(); deferredPrompt = e; });
        
        async function handleInstallClick() {
            if (deferredPrompt) { deferredPrompt.prompt(); await deferredPrompt.userChoice; deferredPrompt = null; }
            else { alert('Меню браузера -> На экран Домой'); }
        }

        function goToBot() { 
            speak("Переходим в Телеграм бот");
            window.location.href = BOT_URL; 
        }
        
        function openModal(id) { document.getElementById(id).style.display = "block"; }
        function closeModal(id) { document.getElementById(id).style.display = "none"; }

        function switchTab(tab) {
            const isLogin = tab === 'login';
            document.getElementById('login-section').style.display = isLogin ? 'block' : 'none';
            document.getElementById('buy-section').style.display = isLogin ? 'none' : 'block';
            document.getElementById('btn-tab-login').classList.toggle('active', isLogin);
            document.getElementById('btn-tab-buy').classList.toggle('active', !isLogin);
            if(!isLogin) speak("Оформление новой лицензии");
        }

        function calculatePrice() {
            const limit = parseInt(document.getElementById('buyLimit').value) || 0;
            const days = parseInt(document.getElementById('buyMonths').value);
            const type = document.getElementById('buyType').value;
            const typeText = type === 'logist' ? 'Логистика' : 'Мерч';
            
            let pricePerWorker = 0;
            let discountText = "Без скидки";
            
            if (days == 30) { pricePerWorker = 1500; discountText = "Без скидки"; }
            else if (days == 90) { pricePerWorker = 1350; discountText = "Скидка десять процентов"; }
            else if (days == 180) { pricePerWorker = 1275; discountText = "Скидка пятнадцать процентов"; }
            else if (days == 365) { pricePerWorker = 1250; discountText = "Максимальная выгода"; }
            
            const total = limit * (pricePerWorker * (days / 30));
            document.getElementById('totalPriceDisplay').innerText = Math.round(total).toLocaleString() + ' ₽';
            clearTimeout(window.speechTimer);
            window.speechTimer = setTimeout(() => { speak(`Проект ${typeText}. Лимит ${limit} человек. ${discountText}.`); }, 1000);
        }

        async function loginToCabinet() {
            const keyInput = document.getElementById('userKey').value.trim().toUpperCase();
            if(!keyInput) return alert('Введите ключ!');
            try {
                const response = await fetch(`${SERVER_URL}/api/keys`);
                const keys = await response.json();
                const found = keys.find(k => k.key === keyInput);
                if (found && found.ownerChatId) {
                    speak(`Доступ подтвержден. Добро пожаловать.`);
                    document.getElementById('auth-ui').style.display = 'none';
                    document.getElementById('iframe-section').style.display = 'block';
                    document.getElementById('cabinetTitle').innerText = found.name;
                    document.getElementById('cabinetFrame').src = `${SERVER_URL}/client-dashboard?chatId=${found.ownerChatId}`;
                } else {
                    speak("Ключ не найден");
                    alert('Ключ не найден или еще не активирован в Telegram боте!');
                }
            } catch (e) { alert('Ошибка связи с сервером.'); }
        }

        async function buyLicenseOnSite() {
            const name = document.getElementById('buyName').value.trim();
            const limit = document.getElementById('buyLimit').value;
            const days = document.getElementById('buyMonths').value;
            const type = document.getElementById('buyType').value;
            if(!name) { speak("Введите название объекта"); return alert('Введите название объекта!'); }
            speak(`Формируем счет для компании ${name}`);
            try {
                const r = await fetch(`${SERVER_URL}/api/notify-admin`, {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({ key: "NEW_USER", name: name, days: parseInt(days), limit: parseInt(limit), chatId: "WEBSITE_SALE", type: type })
                });
                const res = await r.json();
                if(res.success && res.payUrl) window.location.href = res.payUrl;
                else alert('Ошибка при создании счета');
            } catch (e) { alert('Ошибка сети'); }
        }
        calculatePrice();
    </script>
</body>
</html>
